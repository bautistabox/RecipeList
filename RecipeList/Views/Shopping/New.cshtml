@model RecipeList.Shopping.ShoppingList

@{
    ViewBag.Title = "title";
    Layout = "_Layout";
}
<!DOCTYPE html>

<html>
<head>
    <title>New Shopping List</title>
</head>
<body>
<h2>New Shopping List</h2>
<div align="center">
    <div style="width: 40%" align="left">
        <form action="/shopping/process" id="myForm" method="post">
            <div class="form-group">
                <label asp-for="Name"></label>
                <input type="text" id="Name" name="title" placeholder="ex. Thanksgiving Day List" class="form-control"/>
            </div>

            <div class="form-group" align="center">
                <label for="listItemInput">
                    Add Items to your list:
                    <input name="myListItem" id="listItemInput"/>
                </label>
                <input type="button" id="add-row" class="btn btn-primary" value="Add Item"/>
            </div>
            <script src="https://code.jquery.com/jquery-1.12.4.min.js"></script>
            <script type="text/javascript">
                var itemList = [];

                $(document).ready(function() {
                    $("#add-row").click(function() {
                        var name = $("#listItemInput").val();
                        var markup = "<tr><td>" +
                            name +
                            "</td><td><button type='button' class='close' " +
                            "aria-label='Close'><span aria-hidden='true'>&times;</span></button></td></tr>";
                        $("#listItemInput").val("");
                        $("table tbody").append(markup);
                    });

                    // insert this in markup if you need a check box to delete 
//                    <td><input type='checkbox' name='record'></td>
                    // Find and remove selected table rows
//                    $(".delete-row").click(function() {
//                        $("table tbody").find('input[name="record"]').each(function() {
//                            if ($(this).is(":checked")) {
//                                $(this).parents("tr").remove();
//                            }
//                        });
//                    });
                    $("#create-list").click(function() {
                        var table = document.getElementById('myTable');
                        var title = document.getElementById('Name').value;
                        for (var r = 0, n = table.rows.length; r < n; r++) {
                            for (var c = 0, m = table.rows[r].cells.length; c < m; c += 2) {
                                itemList.push(table.rows[r].cells[c].innerHTML);
                            }
                        }
                        itemList.shift();
//                        var size = itemList.length;
                        var data = { Name: title, Len: itemList.length, Items: itemList};
                        alert(JSON.stringify(data));
                        document.getElementById('data').value = JSON.stringify(data);
                        
                        
//                        console.log(document.getElementById('data').value);
                        $('#myForm').submit();
                    });
                    $('#myTable').on('click',
                        'button[type="button"]',
                        function() {
                            $(this).closest('tr').remove();
                        });
                });
            </script>

            <div align="center">
                <div style="width: 65%">
                    <table class="table table-striped" id="myTable">
                        <thead>
                        <tr>
                            @* <th scope="col" style="width: 10%">Remove</th> *@
                            <th scope="col" style="width: 90%">Items</th>
                            <th scope="col" style="width: 10%"></th>
                        </tr>
                        </thead>
                        <tbody>
                        </tbody>
                    </table>

                    @* <button type="button" class="delete-row">Delete Row</button> *@
                    <br/>
                    <div align="center">
                        <button type="button" id="create-list" class="btn btn-primary">Create List</button>
                    </div>
                    <input name="Data" id="data" hidden="true"/>
                </div>
            </div>
        </form>
    </div>
</div>
</body>
</html>